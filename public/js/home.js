!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=1)}({1:function(e,t,o){e.exports=o("ANKz")},ANKz:function(e,t){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}new Vue({el:"#egg",data:function(){return{tableHeight:navigator.userAgent.toLowerCase().indexOf("andriod")>-1?"90vh":"97.5vh",stocks:JSON.parse(window.originalStocks)||[],tRealDate:window.tRealDate,tEstimateDate:window.tEstimateDate,dialogTitle:"",isShowDialog:!1,stockDetail:{cate1:"",name:"",code:"",cost:"",hold_num:""},defaultTableSort:{prop:localStorage.getItem("egg-table-sort-prop")||"",order:localStorage.getItem("egg-table-sort-order")||"ascending"},stockRules:{cate1:[{required:!0,message:"",trigger:"change"}],name:[{required:!0,message:"",trigger:"change"}],code:[{required:!0,message:"",trigger:"change"}],cost:[{required:!0,type:"number",message:"",trigger:"change"}],hold_num:[{required:!0,type:"number",message:"",trigger:"change"}]},updateUrl:"",storeUrl:window.storeUrl,searchUrl:window.searchUrl,deleteUrl:"",isUpdate:!1,isLoading:!1,suggestOptions:[],isSearching:!1,searchTimer:null}},methods:{assignStockDetails:function(e){e=e||{},this.stockDetail={cate1:e.cate1||"",name:e.name||"",code:e.code||"",cost:e.cost||0,hold_num:e.hold_num||0}},handleSortChange:function(e){var t=e.prop,o=e.order;console.log(t,o),localStorage.setItem("egg-table-sort-prop",t),localStorage.setItem("egg-table-sort-order",o)},handleCreate:function(){var e=this;!1!==this.isUpdate&&(this.assignStockDetails(),this.isUpdate=!1),this.dialogTitle="New Stock",this.isShowDialog=!0,this.$nextTick((function(){return e.$refs.stockDetail.clearValidate()}))},handleEdit:function(e){this.assignStockDetails(e),this.dialogTitle="Edit Stock",this.isShowDialog=!0,this.isUpdate=!0,this.updateUrl=e.edit},handleDelete:function(e){var t=this;this.$confirm("确认删除此持仓？","",{type:"warning"}).then((function(){t.sendRequest("delete",e)})).catch((function(){}))},submitForm:function(){var e=this;this.$refs.stockDetail.validate((function(t){if(!0!==t)return!1;e.isLoading=!0;var o=e.isUpdate?e.updateUrl:e.storeUrl,r=e.isUpdate?"put":"post";e.sendRequest(r,o,e.stockDetail)}))},sendRequest:function(e,t,r){var n=this;return axios({method:e,url:t,data:r}).then((function(e){n.$message.success("操作成功"),setTimeout((function(){return location.reload()}),666)})).catch((function(e){if(n.isLoading=!1,!e.response||422!==e.response.status||!e.response.data||"object"!==o(e.response.data.errors))return n.$message.error("操作失败："+"".concat(e.message,", Code:").concat(e.code));var t=e.response.data.errors,r=[];Object.keys(t).forEach((function(e){r.push(t[e][0])})),n.$message.error(r.join("；"))}))},search:function(e){var t=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout((function(){var o={keyword:e,type:"fund"};axios.get(t.searchUrl,{params:o}).then((function(e){t.suggestOptions=e.data||[]})).catch((function(e){t.suggestOptions=[]})).then((function(){return t.isSearching=!1}))}),600)},handleSelectedStock:function(e){this.stockDetail.code=e},getSummaries:function(e){var t,o=e.columns,r=e.data,n=[],i=["cost_amount","profit_amount","profit_ratio"],a=0,s=0;return r.forEach((function(e){a+=Number(e.cost_amount),s+=Number(e.profit_amount)})),a=a.toFixed(2),s=s.toFixed(2),t=(s/a*100).toFixed(2)+"%",o.forEach((function(e,o){0!==o?-1!==i.indexOf(e.property)?n[o]="cost_amount"===e.property?a:"profit_amount"===e.property?s:t:n[o]="":n[o]="合计"})),n}}})}});